-- ==============================
-- Production Data Migration: Create Organization Records
-- ==============================
-- Run this in your production Supabase database AFTER running migration 002_dealtracker.sql
-- This will create Organization records for all unique companies from your Job data
-- ==============================

-- Create unique constraint on lowercase organization name if it doesn't exist
DO $$
BEGIN
  IF NOT EXISTS (
    SELECT 1 FROM pg_constraint WHERE conname = 'organization_name_lower_unique'
  ) THEN
    ALTER TABLE "Organization"
    ADD CONSTRAINT organization_name_lower_unique UNIQUE (LOWER(name));
  END IF;
END $$;

-- Insert unique organizations with proper timestamps
INSERT INTO "Organization" (name, created_at, updated_at)
VALUES
  ('Poly AI', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Crustdata', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('city of new york', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('zeta global', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('linda werner', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('kofas northamerica insurance co.', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Peloton', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Consumer Edge', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('ZocDoc', '2025-11-11 11:22:46', '2025-11-11 11:25:13'),
  ('Quizlet', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('BitGo', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Capitalize', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Vestwell', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Vesto', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Western & Southern Financial', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Bronx Defenders', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Hudson Valley Credit Union', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('IBM', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Pryon', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Nourish', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Adonis.io', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Harmonic', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Asana', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Cooperidge Consulting', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Coast', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('April', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Crosby', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Better', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Headspace', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Harvey', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Traversal', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Brex', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Together AI', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Neem', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('ShelfCycle', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('On Me', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Cassidy', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('keru.ai', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Norm.AI', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Harold', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Farther', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Parabola', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Brisk Teaching', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('sonar hiring', '2025-11-11 11:22:46', '2025-11-11 17:37:27'),
  ('Stepful', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Miro', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Affirma Group', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Airgoods', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Method Financial', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Clarion', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Peregrine', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Jacobsen Consulting Applications', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('DataKind', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Friends From The City', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('ContentSquare', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('B&H', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Braze', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Semgrep', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Replica', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Bumble', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('DeepL', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Replit', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Navan', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Okta', '2025-11-11 11:22:46', '2025-11-11 19:25:09'),
  ('Melio', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Xogene, LLC', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Patreon', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('New York Post', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Inkeep', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Amplify Education Inc.', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Siro', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Arc', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Courier Health', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Tarte', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Regrello', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Rokt', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Christine Valmy School', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Baseten', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Scale GP', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Viam', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Hearth', '2025-11-11 11:22:46', '2025-11-11 17:39:18'),
  ('DataDog', '2025-11-11 11:22:46', '2025-11-11 23:02:42'),
  ('LogRocket', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Tennr', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Paramount', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Modern Life', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Kale', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Applied Labs', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Miter', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Etsy', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Adonis', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('GlossGenius', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Graphite', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Tavus', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('ShiftSmart', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Persona', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Versana', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Torch', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Superblocks', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Meridian', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Axion Ray', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Sigma Computing', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Hudson River Trading', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('American Equity Investment Life Insurance Co.', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('SquareSpace', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Particle Health', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Lithos', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Mirage', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Monday.com', '2025-11-11 11:22:46', '2025-11-11 11:24:50'),
  ('Rockstar Games', '2025-11-11 11:22:46', '2025-11-11 11:25:13'),
  ('MTA', '2025-11-11 11:22:46', '2025-11-11 11:25:22'),
  ('Quantiphi', '2025-11-11 11:22:46', '2025-11-11 11:25:31'),
  ('Radical AI', '2025-11-11 11:22:46', '2025-11-11 17:35:45'),
  ('Workmate', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Pave', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('MLabs', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Parker', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Unify', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Findigs', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Didero', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('OnMed', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Spotify', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Materialize', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Elite', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Capgemini', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('West Monroe Partners', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('The Weather Company', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Permit Flow', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Privy', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('MongoDB', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Ramp', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Reddit', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Lyft', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Northwell Health', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Octane', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('KYD Labs', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Strativ Group', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Glanceable', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('probono net', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Stash', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Mias Bakery', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Veritext', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Neotecra, Inc', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Kintegral Asset Management', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('Simons Foundation', '2025-11-11 11:22:46', '2025-11-11 11:22:46'),
  ('NYU Langone Health', '2025-11-11 11:22:46', '2025-11-11 11:24:31'),
  ('Polimorphic', '2025-11-11 11:22:46', '2025-11-11 11:25:49'),
  ('Uphold', '2025-11-11 11:22:46', '2025-11-11 17:37:17'),
  ('Adobe', '2025-11-11 11:22:46', '2025-11-11 17:40:17'),
  ('Mastercard', '2025-11-11 11:22:46', '2025-11-11 11:25:38'),
  ('Kargo', '2025-11-11 11:22:46', '2025-11-11 11:25:44'),
  ('Evolution IQ', '2025-11-11 11:22:46', '2025-11-11 17:36:40'),
  ('Substack', '2025-11-11 11:22:46', '2025-11-11 17:36:54'),
  ('Sage', '2025-11-11 19:30:34', '2025-11-11 19:30:34'),
  ('Firsthand', '2025-11-11 19:37:33', '2025-11-11 19:37:33'),
  ('WalkMe', '2025-11-11 19:44:16', '2025-11-11 19:46:26'),
  ('Notion', '2025-11-11 19:53:48', '2025-11-11 19:53:48'),
  ('Titan', '2025-11-11 20:02:29', '2025-11-11 20:02:29'),
  ('Fortify', '2025-11-11 20:09:56', '2025-11-11 20:09:56'),
  ('Bridge Health AI', '2025-11-11 20:12:43', '2025-11-11 20:12:43'),
  ('Vendelux', '2025-11-11 20:26:47', '2025-11-11 20:26:47'),
  ('EliseAI', '2025-11-11 21:27:03', '2025-11-11 21:27:03'),
  ('Normal Computing', '2025-11-11 22:22:38', '2025-11-11 22:22:38'),
  ('Nominal', '2025-11-11 22:33:44', '2025-11-11 22:33:44'),
  ('TechTree', '2025-11-11 23:12:09', '2025-11-11 23:12:09'),
  ('Valon', '2025-11-12 00:32:26', '2025-11-12 00:32:26'),
  ('Clay', '2025-11-12 00:43:44', '2025-11-12 00:43:44'),
  ('Altana', '2025-11-12 00:57:11', '2025-11-12 00:57:11'),
  ('T Rowe Price', '2025-11-12 02:10:44', '2025-11-12 02:10:44'),
  ('Accrue', '2025-11-12 04:04:13', '2025-11-12 04:04:13'),
  ('Auctor', '2025-11-12 04:08:39', '2025-11-12 04:08:39'),
  ('Ridgeline', '2025-11-12 04:11:26', '2025-11-12 04:11:26'),
  ('Norm AI', '2025-11-12 04:45:34', '2025-11-12 04:45:34'),
  ('Current', '2025-11-12 04:49:18', '2025-11-12 04:49:46'),
  ('Hatz', '2025-11-13 16:00:39', '2025-11-13 16:00:39'),
  ('Retool', '2025-11-13 21:13:12', '2025-11-13 21:13:12'),
  ('Adaptive', '2025-11-14 02:07:34', '2025-11-14 02:07:34'),
  ('CardFlight', '2025-11-14 02:26:18', '2025-11-14 02:26:18'),
  ('Knot', '2025-11-14 02:37:49', '2025-11-14 02:37:49'),
  ('Middesk', '2025-11-14 02:40:31', '2025-11-14 02:40:31'),
  ('Plaid', '2025-11-14 19:09:16', '2025-11-14 19:09:16'),
  ('Green Spark', '2025-11-14 19:22:03', '2025-11-14 19:22:03'),
  ('Double Verify', '2025-11-15 19:36:38', '2025-11-15 19:36:38'),
  ('Mercury', '2025-11-16 02:22:22', '2025-11-16 02:22:22')
ON CONFLICT (LOWER(name)) DO NOTHING;

-- Verification query
SELECT COUNT(*) as total_organizations FROM "Organization";
